<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dave's Commission Calculator — Dark Mode</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: #121212;
            color: #e0e0e0;
        }
        h1 {
            text-align: center;
            color: #bb86fc;
        }
        .calc {
            background: #1e1e1e;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }
        label {
            display: block;
            margin: 18px 0 6px;
            font-weight: bold;
            color: #bb86fc;
        }
        select, input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #333;
            border-radius: 6px;
            background: #2c2c2c;
            color: #e0e0e0;
        }
        select:focus, input:focus {
            outline: none;
            border-color: #bb86fc;
        }
        .result {
            margin-top: 25px;
            padding: 20px;
            background: #26332c;
            border-radius: 8px;
            text-align: center;
        }
        .net-premium {
            font-size: 48px;
            font-weight: bold;
            color: #a8e6cf;
            text-shadow: 0 0 10px rgba(168, 230, 207, 0.5);
        }
        .details {
            font-size: 15px;
            margin-top: 15px;
            background: #2c2c2c;
            padding: 15px;
            border-radius: 6px;
            line-height: 1.7;
            color: #cfcfcf;
        }
        .vehicles {
            display: none;
        }
    </style>
</head>
<body>

<h1>Net Premium Calculator</h1>
<div class="calc">

    <label>Policy Type</label>
    <select id="type" onchange="updateFields(); calculate()">
        <option value="">– Select Type –</option>
        <option value="Auto">Auto</option>
        <option value="Home">Homeistorical</option>
        <option value="Foremost Home">Foremost Home</option>
        <option value="Life">Life</option>
        <option value="Specialty">Specialty</option>
        <option value="Commercial">Commercial</option>
        <option value="Commercial Specialty">Commercial Specialty</option>
    </select>

    <label>Carrier</label>
    <select id="carrier" onchange="calculate()">
        <option value="">– Select Carrier –</option>
        <option value="Farmers">Farmers</option>
        <option value="BW">BW (Bristol West)</option>
        <option value="Foremost">Foremost</option>
    </select>

    <label>Written Premium</label>
    <input type="number" id="premium" placeholder="e.g. 1245.67" step="0.01" oninput="calculate()">

    <div class="vehicles" id="vehiclesDiv">
        <label>Number of Vehicles</label>
        <input type="number" id="vehicles" value="1" min="1" oninput="calculate()">
    </div>

    <div class="result" id="result">Fill in all fields →</div>
    <div class="details" id="details"></div>
</div>

<script>
    const rates = {
        'Auto': 0.045,
        'Home': 0.06,
        'Foremost Home': 0.05,
        'Life': 0.25,
        'Specialty': 0.075,
        'Commercial': 0.075,
        'Commercial Specialty': 0.075
    };

    function updateFields() {
        const type = document.getElementById('type').value;
        document.getElementById('vehiclesDiv').style.display = (type === 'Auto') ? 'block' : 'none';
        calculate();
    }

    function calculate() {
        const type     = document.getElementById('type').value;
        const carrier  = document.getElementById('carrier').value;
        const premium  = parseFloat(document.getElementById('premium').value) || 0;
        const vehicles = (type === 'Auto') ? (parseFloat(document.getElementById('vehicles').value) || 1) : 0;

        if (!type || !carrier || premium <= 0) {
            document.getElementById('result').innerHTML = "Please fill in all fields correctly";
            document.getElementById('details').innerHTML = "";
            return;
        }

        // H - Additional Assessment (only Farmers Auto: 15 per vehicle)
        const h = (type === "Auto" && carrier === "Farmers") ? vehicles * 15 : 0;

        // I - Statutory Assessment
        let i = 0;
        if (type === "Auto" && carrier === "BW")      i = vehicles * 57.12;
        else if (type === "Auto" && carrier === "Farmers") i = vehicles * 14;

        // J - MCCA Deficit
        const j = (type === "Auto" && carrier === "Farmers") ? vehicles * 24 : 0;

        // K - Net Premium (exact logic from your tracker)
        let netPremium = 0;
        if (type === "Auto" && carrier === "Farmers") {
            netPremium = premium - h - i - j;
        } else if (type === "Auto" && carrier === "BW") {
            netPremium = premium - i;
        } else {
            netPremium = premium;
        }

        const rate = rates[type] || 0;

        // Main result: BIG highlighted Net Premium only
        document.getElementById('result').innerHTML = `
            <div class="net-premium">$${netPremium.toFixed(2)}</div>
            <div style="margin-top:10px; font-size:18px; color:#bbbbbb;">Net Premium</div>
        `;

        // Details below (commission hidden from main view)
        let breakdown = `Written Premium: $${premium.toFixed(2)}<br>`;
        if (h > 0) breakdown += `− Additional Assessment: $${h.toFixed(2)}<br>`;
        if (i > 0) breakdown += `− Statutory Assessment: $${i.toFixed(2)}<br>`;
        if (j > 0) breakdown += `− MCCA Deficit: $${j.toFixed(2)}<br>`;
        breakdown += `<strong style="color:#a8e6cf;">Net Premium: $${netPremium.toFixed(2)}</strong><br>`;
        breakdown += `<small style="color:#888;">(Commission Rate: ${(rate*100).toFixed(2)}% — internal use only)</small>`;

        document.getElementById('details').innerHTML = breakdown;
    }

    updateFields();
</script>
</body>
</html>
